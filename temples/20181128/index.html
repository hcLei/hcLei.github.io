<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>React项目实战开发总结</title>
    <link rel='stylesheet' href='../../public/markdown.min.css' />
    <link rel='stylesheet' href='../../public/style.css' />
    <link rel="icon" type="image/png" href="../../public/images/icon.png" sizes="32x32">
    <meta name="description"
        content="个人博客网站，专注于分享技术知识，包括但不限于HTML5、CSS3、JavaScript、Nodejs、Linux、Python、Nginx、React、Vue、Angular">
    <meta name="keywords"
        content="个人、博客、技术、互联网、分享、笔记、前端开发、HTML5、CSS3、JavaScript、Nodejs、Linux、Python、Nginx、React、Vue、Angular">
</head>

<body>
    <header class="header">
        <div class="header-inner">
            <div class="header-title">
                <a href="../../">致力于分享与进步</a>
            </div>
        </div>
    </header>
    <main class="main">
        <div class="main-inner">
            <div class="content-item">
                <p class="content-title"><a>React项目实战开发总结</a></p>
                <p class="content-createTime"><img src="../../public/images/date.svg" alt="date">发表于 2018-11-28</p>
            </div>
            <div class="content-description">
                <p>最近总算结束了几个月的需求爆发期，后期主要是维护工作和少量的需求变更。打算利用业余时间学习一些新技术，提高自身能力，正好准备跟朋友合作开发新的项目，前端技术栈选择的是当前流行的React框架，在开发过程中，遇到了很多的问题，踩了很多的坑，也积累了不少的经验，完成了前期功能的开发，后续也在逐渐的扩展新功能，可点击<a
                        href="http://www.depclothes.com/">网站主页</a>前往体验。</p>
                <p>项目初始化使用的是React官网的脚手架工具<code>create-react-app</code>进行搭建,并搭配如下技术进行快速开发：</p>
                <ul>
                    <li><a href="https://reacttraining.com/react-router/web/guides/quick-start">React-Router</a>（v4）
                    </li>
                    <li><a href="https://ant.design/">Antd</a>(UI组件)</li>
                    <li><a href="https://www.npmjs.com/package/axios">Axios</a>（HTTP请求）</li>
                    <li><a href="https://lbs.amap.com/">高德地图开发者API</a></li>
                </ul>
                <h3 id="h3-1-"><a name="1.自定义配置" class="reference-link"></a><span
                        class="header-link octicon octicon-link"></span>1.自定义配置</h3>
                <p>项目中使用了 Ant Design
                    UI组件，当使用的时候，默认是一次性引入所有的样式，没有体现组件化的思想，需要保证样式也能按需引入，使用什么组件，就引入对应的样式。由于项目直接使用的<code>create-react-app</code>脚手架工具初始化的，webpack配置文件默认被隐藏了，不过官网提供了<code>npm run eject</code>命令将配置文件暴露出来方便我们自定义配置，不过该命令操作是不可逆的，也就是说暴露后就没法隐藏了。
                </p>
                <p>通过网上查资料，我们可以使用<a href="https://github.com/timarney/react-app-rewired">react-app-rewired</a> （一个对
                    create-react-app 进行自定义配置的社区解决方案）,可以不用暴露webpack配置文件，而是通过建立新的js文件去添加或者覆盖存在的配置项。</p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="pln">npm install react</span><span class="pun">-</span><span class="pln">app</span><span class="pun">-</span><span class="pln">rewired </span><span class="pun">--</span><span class="pln">save</span></code></li></ol></pre>
                <p>安装后，然后对package.json文件进行修改：</p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="com">/* package.json */</span></code></li><li class="L1"><code><span class="str">"scripts"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pun">-</span><span class="pln"> </span><span class="str">"start"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"react-scripts start"</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pun">+</span><span class="pln"> </span><span class="str">"start"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"react-app-rewired start"</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pun">-</span><span class="pln"> </span><span class="str">"build"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"react-scripts build"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pun">+</span><span class="pln"> </span><span class="str">"build"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"react-app-rewired build"</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pun">-</span><span class="pln"> </span><span class="str">"test"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"react-scripts test"</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pun">+</span><span class="pln"> </span><span class="str">"test"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"react-app-rewired test"</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pun">}</span></code></li></ol></pre>
                <p>然后在项目根目录创建一个 config-overrides.js 用于修改默认配置：</p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> injectBabelPlugin </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'react-app-rewired'</span><span class="pun">);</span></code></li><li class="L1"><code></code></li><li class="L2"><code><span class="kwd">module</span><span class="pun">.</span><span class="pln">exports </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="kwd">override</span><span class="pun">(</span><span class="pln">config</span><span class="pun">,</span><span class="pln"> env</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln"> config </span><span class="pun">=</span><span class="pln"> injectBabelPlugin</span><span class="pun">(</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">[</span><span class="str">'import'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> libraryName</span><span class="pun">:</span><span class="pln"> </span><span class="str">'antd'</span><span class="pun">,</span><span class="pln"> libraryDirectory</span><span class="pun">:</span><span class="pln"> </span><span class="str">'es'</span><span class="pun">,</span><span class="pln"> style</span><span class="pun">:</span><span class="pln"> </span><span class="str">'css'</span><span class="pln"> </span><span class="pun">}],</span></code></li><li class="L5"><code><span class="pln"> config</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">);</span></code></li><li class="L7"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> config</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pun">};</span></code></li></ol></pre>
                <p>上述配置后，就能实现组件样式也能按需引入了。如果不熟悉怎么配置，可以手动把config打印出来仔细看看，这样就清楚怎么去配置了。</p>
                <h3 id="h3-2-"><a name="2.引入地图实现坐标展示" class="reference-link"></a><span
                        class="header-link octicon octicon-link"></span>2.引入地图实现坐标展示</h3>
                <p>在本次项目中，需要将某个IP对应的经纬度坐标标记到地图上进行展示。决定使用高德地图，首先需要去高德地图开发者平台申请key，然后引入script文件。</p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="tag">&lt;script</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text/javascript"</span><span class="pln"> </span><span class="atn">src</span><span class="pun">=</span><span class="atv">"https://webapi.amap.com/maps?v=1.4.10&amp;key=xxx&amp;callback"</span><span class="tag">&gt;&lt;/script&gt;</span></code></li></ol></pre>
                <p>接下来有两种配置方式：<br>1.直接使用window.AMap。注意，若是直接使用AMap，则会报undefined，因为该变量是直接绑定在window作用域下的。 </p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="kwd">let</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> window</span><span class="pun">.</span><span class="typ">AMap</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">(</span><span class="str">'searchMap'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln"> zoom</span><span class="pun">:</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="com">//级别</span></code></li><li class="L2"><code><span class="pln"> center</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">res</span><span class="pun">.</span><span class="pln">geoinfo</span><span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">lon</span><span class="pun">,</span><span class="pln"> res</span><span class="pun">.</span><span class="pln">geoinfo</span><span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">lat</span><span class="pun">],</span><span class="com">//中心点坐标</span></code></li><li class="L3"><code><span class="pln"> viewMode</span><span class="pun">:</span><span class="pln"> </span><span class="str">'3D'</span><span class="com">//使用3D视图</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">});</span></code></li></ol></pre>
                <p>2.通过webpack配置，在需要使用的地方直接import就可以了</p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="com">//config-overrides.js</span></code></li><li class="L1"><code><span class="kwd">const</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> injectBabelPlugin </span><span class="pun">}</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">require</span><span class="pun">(</span><span class="str">'react-app-rewired'</span><span class="pun">);</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="kwd">module</span><span class="pun">.</span><span class="pln">exports </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="kwd">override</span><span class="pun">(</span><span class="pln">config</span><span class="pun">,</span><span class="pln"> env</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln"> config </span><span class="pun">=</span><span class="pln"> injectBabelPlugin</span><span class="pun">(</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">[</span><span class="str">'import'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> libraryName</span><span class="pun">:</span><span class="pln"> </span><span class="str">'antd'</span><span class="pun">,</span><span class="pln"> libraryDirectory</span><span class="pun">:</span><span class="pln"> </span><span class="str">'es'</span><span class="pun">,</span><span class="pln"> style</span><span class="pun">:</span><span class="pln"> </span><span class="str">'css'</span><span class="pln"> </span><span class="pun">}],</span></code></li><li class="L6"><code><span class="pln"> config</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">);</span></code></li><li class="L8"><code><span class="pln"> config</span><span class="pun">.</span><span class="pln">externals </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">'AMap'</span><span class="pun">:</span><span class="pln"> </span><span class="str">'AMap'</span><span class="pun">}</span></code></li><li class="L9"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> config</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pun">};</span></code></li><li class="L1"><code><span class="com">//map.js</span></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> </span><span class="typ">AMap</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'AMap'</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="kwd">let</span><span class="pln"> map </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">AMap</span><span class="pun">.</span><span class="typ">Map</span><span class="pun">(</span><span class="str">'searchMap'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln"> zoom</span><span class="pun">:</span><span class="pln"> </span><span class="lit">11</span><span class="pun">,</span><span class="com">//级别</span></code></li><li class="L6"><code><span class="pln"> center</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">res</span><span class="pun">.</span><span class="pln">geoinfo</span><span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">lon</span><span class="pun">,</span><span class="pln"> res</span><span class="pun">.</span><span class="pln">geoinfo</span><span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">lat</span><span class="pun">],</span><span class="com">//中心点坐标</span></code></li><li class="L7"><code><span class="pln"> viewMode</span><span class="pun">:</span><span class="pln"> </span><span class="str">'3D'</span><span class="com">//使用3D视图</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">});</span></code></li></ol></pre>
                <h3 id="h3-3-http-"><a name="3.优化HTTP请求" class="reference-link"></a><span
                        class="header-link octicon octicon-link"></span>3.优化HTTP请求</h3>
                <p>1.Axios 是一个基于 promise（异步流程控制） 的 HTTP 库，底层都已经封装好了，可以快速使用各种请求。感兴趣的可以去<a
                        href="https://www.npmjs.com/package/axios">官网</a>看看，API文档非常简洁明了，直接安装就可以使用。</p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="pln">npm install axios </span><span class="pun">--</span><span class="pln">save</span></code></li></ol></pre>
                <p>2.随着项目需求的增加，代码也会越来越多，对于重复的代码需要进行优化。在HTTP请求中，可以将get、post、put、delete等请求方法放到一个文件中，这样既可以在发起请求前实现某些操作(比如添加认证Header等)，也可以在拿到请求结果后优先进行某些处理（比如某些错误的状态码统一进行提示，或者认证过期需要跳转到登陆界面），然后让请求结果进入具体的业务逻辑中。并且请求的URL或者某些变量等，都可以统一进行配置，统一进行修改，避免去多个具体的业务文件中依次更改。下面列出http配置文件部分代码（部分代码因为业务安全做了修改和删减）：
                </p>
                <pre class="prettyprint linenums prettyprinted"
                    style=""><ol class="linenums"><li class="L0"><code><span class="com">// http外层统一配置处理</span></code></li><li class="L1"><code><span class="kwd">import</span><span class="pln"> axios </span><span class="kwd">from</span><span class="pln"> </span><span class="str">"axios"</span><span class="pun">;</span></code></li><li class="L2"><code><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> message </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'antd'</span><span class="pun">;</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> baseURL </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln"> communityAPI</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://xxx"</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln"> hostWebAPI</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://xxx"</span></code></li><li class="L7"><code><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">axios</span><span class="pun">.</span><span class="pln">defaults</span><span class="pun">.</span><span class="pln">timeout </span><span class="pun">=</span><span class="pln"> </span><span class="lit">30000</span><span class="pun">;</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="com">// 添加请求拦截器</span></code></li><li class="L1"><code><span class="pln">axios</span><span class="pun">.</span><span class="pln">interceptors</span><span class="pun">.</span><span class="pln">request</span><span class="pun">.</span><span class="kwd">use</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln"> </span><span class="com">// 在发送请求之前做些什么</span></code></li><li class="L3"><code><span class="pln"> config</span><span class="pun">.</span><span class="pln">headers</span><span class="pun">[</span><span class="str">"token"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> localStorage</span><span class="pun">.</span><span class="pln">getItem</span><span class="pun">(</span><span class="str">"user_token"</span><span class="pun">);</span></code></li><li class="L4"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> config</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pun">},</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln"> </span><span class="com">// 对请求错误做些什么</span></code></li><li class="L7"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">.</span><span class="pln">reject</span><span class="pun">(</span><span class="pln">error</span><span class="pun">);</span></code></li><li class="L8"><code><span class="pun">});</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="com">// 添加响应拦截器</span></code></li><li class="L1"><code><span class="pln">axios</span><span class="pun">.</span><span class="pln">interceptors</span><span class="pun">.</span><span class="pln">response</span><span class="pun">.</span><span class="kwd">use</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln"> </span><span class="com">// 对响应数据做点什么</span></code></li><li class="L3"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> response</span><span class="pun">;</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pun">},</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln"> </span><span class="com">// 对响应错误做点什么</span></code></li><li class="L7"><code><span class="pln"> message</span><span class="pun">.</span><span class="pln">error</span><span class="pun">(</span><span class="pln">error</span><span class="pun">.</span><span class="pln">response</span><span class="pun">.</span><span class="pln">data</span><span class="pun">.</span><span class="pln">message</span><span class="pun">);</span></code></li><li class="L8"><code><span class="pln"> </span><span class="com">//需要认证则跳转</span></code></li><li class="L9"><code><span class="pln"> </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">error</span><span class="pun">.</span><span class="pln">response</span><span class="pun">.</span><span class="pln">status </span><span class="pun">===</span><span class="pln"> </span><span class="lit">401</span><span class="pun">){</span></code></li><li class="L0"><code><span class="pln"> window</span><span class="pun">.</span><span class="pln">location</span><span class="pun">.</span><span class="pln">href </span><span class="pun">=</span><span class="pln"> </span><span class="str">"/account/login"</span><span class="pun">;</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">}</span></code></li><li class="L2"><code><span class="pun">});</span></code></li><li class="L3"><code></code></li><li class="L4"><code><span class="com">// get请求</span></code></li><li class="L5"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> getServer</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">params</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">((</span><span class="pln">resolve</span><span class="pun">,</span><span class="pln"> reject</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln"> axios</span><span class="pun">.</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">params</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L8"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln"> resolve</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">data</span><span class="pun">);</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln"> reject</span><span class="pun">(</span><span class="pln">error</span><span class="pun">);</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L5"><code><span class="pun">}</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="com">// post请求</span></code></li><li class="L8"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> postServer</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">((</span><span class="pln">resolve</span><span class="pun">,</span><span class="pln"> reject</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln"> axios</span><span class="pun">.</span><span class="pln">post</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln"> resolve</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">data</span><span class="pun">);</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln"> reject</span><span class="pun">(</span><span class="pln">error</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L8"><code><span class="pun">}</span></code></li><li class="L9"><code></code></li><li class="L0"><code><span class="com">// patch请求</span></code></li><li class="L1"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> patchServer</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">((</span><span class="pln">resolve</span><span class="pun">,</span><span class="pln"> reject</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln"> axios</span><span class="pun">.</span><span class="pln">patch</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> data</span><span class="pun">)</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln"> resolve</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">data</span><span class="pun">);</span></code></li><li class="L6"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln"> reject</span><span class="pun">(</span><span class="pln">error</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L1"><code><span class="pun">}</span></code></li><li class="L2"><code></code></li><li class="L3"><code><span class="com">// delete请求</span></code></li><li class="L4"><code><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> deleteServer</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">params</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Promise</span><span class="pun">((</span><span class="pln">resolve</span><span class="pun">,</span><span class="pln"> reject</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln"> axios</span><span class="pun">.</span><span class="kwd">delete</span><span class="pun">(</span><span class="pln">url</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">params</span><span class="pln"> </span><span class="pun">})</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">then</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">response</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln"> resolve</span><span class="pun">(</span><span class="pln">response</span><span class="pun">.</span><span class="pln">data</span><span class="pun">);</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L0"><code><span class="pln"> </span><span class="pun">.</span><span class="kwd">catch</span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln">error</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln"> reject</span><span class="pun">(</span><span class="pln">error</span><span class="pun">);</span></code></li><li class="L2"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">})</span></code></li><li class="L4"><code><span class="pun">}</span></code></li></ol></pre>
                <h3 id="h3-4-"><a name="4.路由配置" class="reference-link"></a><span
                        class="header-link octicon octicon-link"></span>4.路由配置</h3>
                <p>对于单页面应用，路由将所有界面联系到了一起，如何使用正确的使用路由是非常重要的，该项目使用的是<code>React-Router v4</code>，是当前的最新版本，详情浏览下一篇文章-React-Router v4实战开发总结。</p>
                <p>欢迎转载，转载请注明出处。</p>
            </div>
        </div>
    </main>
    <footer class="footer">
        <div class="footer-link">
            <div>© 2018 - 2019</div>
            <div><a target="_blank" href="http://github.com/hcLei"><img src="../../public/images/github.svg"
                        alt="github"></a></div>
            <div><a target="_blank"
                    href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=BzY0MTc0Pj81MjFHdnYpZGhq"><img
                        src="../../public/images/email.svg" alt="email"></a></div>
        </div>
        <div class="footer-info">
            <div><img src="../../public/images/computer.svg" alt="computer"><a target="_blank"
                    href="http://www.miibeian.gov.cn">渝ICP备16007578号</a></div>
        </div>
    </footer>
</body>

</html>